
# Node API skeleton

Combining the Node.js/ES6 libs du jour for the purpose of providing JSON APIs for apps.

* Babel/ES6 transpiling
* Express for middleware
* Jest for testing, Supertest for mocking express
* Persistence using Mongoose/MongoDB

## Directory Structure

* `package.json` - Configure dependencies
* `dist/*` - Files generated by babel
* `src` - All source code
* `src/*/__tests__` - Unit tests
* `src/run.js` - Entrypoint for running and binding API
* `src/lib` - Library files like utils etc
* `src/api` - Express routes
* `src/middleware` - Middleware libs
* `src/models` - Models for ORM (Mongoose)
* `src/index.js` - Entrypoint into API (does not bind, so can be used in unit tests)

## API Routes


All routes are name spaced with a v1 version:

```
POST    /1/users                       # Create user
GET     /1/users                       # Search/List users (for admin)
GET     /1/users/:user_id              # Get user (admin only)
DELETE  /1/users/:user_id              # Delete user (admin only)
POST    /1/users/:user_id              # Update user (admin only)
GET     /1/users/self                  # Get my user info
DELETE  /1/users/self                  # Delete my account
POST    /1/users/self                  # Update my account
POST    /1/users/sessions              # Get auth token (create session)
```

## Install Dependencies

```
yarn install
```

## Testing

```
yarn test
```

## Linting

```
yarn lint
```

## Todo

- [x] Basic ES6 express example
- [x] Jest unit testing example of mocked express
- [x] Add Mongoose persistence example
- [x] Add await/async test case
- [x] Make Mongoose test code await/async
- [x] Add Mongoose + Express + await/async test case
- [x] Add admin user management API
- [x] Add signup and session API
- [x] Document API
- [x] Document directory structure
- [ ] Add AirBnB base
- [ ] Align code style
- [ ] Add user attribute cleansing
- [ ] Use promises for init portion
- [ ] Add environment var based config
- [ ] Fix docker
- [ ] Add forgot password API
